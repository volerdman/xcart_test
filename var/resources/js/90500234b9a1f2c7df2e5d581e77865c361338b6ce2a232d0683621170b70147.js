
/* AUTOGENERATED: rating.js */
CommonForm.elementControllers.push({pattern:'.product-average-rating-toggle',handler:function(){jQuery(this).hover(function(){jQuery('.product-average-rating-container').toggle()})}});CommonForm.elementControllers.push({pattern:'div.vote-bar',handler:function(){var $tooltip=jQuery(this).closest('div').parent().children('.rating-tooltip'),$div=jQuery(this).closest('div'),timeout;$div.hover(function(){timeout=setTimeout(function(){$tooltip.show(100)},250)},function(){clearTimeout(timeout);$tooltip.hide(100)})}});;
/* AUTOGENERATED: rating.js */
function VoteBarController(base){this.callSupermethod('constructor',arguments);var form=jQuery(this.base).closest('form').get(0);if(form)this.productId=jQuery('input[name=product_id]',form).eq(0).val();if(this.productId){this.returnTarget=jQuery('input[name=return_target]',form).eq(0).val();this.block=new VoteBarView(this.base,this.productId,this.returnTarget)}};extend(VoteBarController,AController);VoteBarController.prototype.name='VoteBarController';VoteBarController.prototype.findPattern='.product-average-rating';VoteBarController.prototype.block=null;VoteBarController.prototype.buttonsBlock=null;VoteBarController.prototype.initialize=function(){var o=this;this.base.bind('reload',function(event,box){event.stopImmediatePropagation();o.bind(box)})}
function VoteBarClick(obj){if(!obj._rating)obj._rating=parseInt(jQuery(obj).attr('class').match(/\d+/));jQuery(obj).closest('.vote-bar.editable').find('input[name=rating]').val(obj._rating);mainObj=jQuery(obj).closest('.vote-bar.editable').get(0);mainObj._rating=obj._rating;return false}
function VoteBarView(base,productId,returnTarget){this.callSupermethod('constructor',arguments);this.productId=productId;this.returnTarget=returnTarget;this.linkClickHandler=function(event){event.stopPropagation();return false}};extend(VoteBarView,ALoadable);VoteBarView.prototype.productId=null;VoteBarView.prototype.returnTarget=null;VoteBarView.prototype.rating=null;VoteBarView.prototype.shadeWidget=true;VoteBarView.prototype.widgetTarget='review';VoteBarView.prototype.widgetClass='\\XLite\\Module\\XC\\Reviews\\View\\AverageRating';VoteBarView.prototype.prevFormActionValue='';VoteBarView.prototype.prevFormActionInput=null;VoteBarView.prototype.prevShadeWidget=null;VoteBarView.prototype.postprocess=function(isSuccess,initial){this.callSupermethod('postprocess',arguments);if(isSuccess){var o=this,widgetClass=jQuery('input[name=target_widget]',o.base).eq(0).val();if(widgetClass)this.widgetClass=widgetClass;jQuery(this.base).find('.vote-bar.editable .stars-row.hovered .star-single').bind('click',function(event){VoteBarClick(this);return o.rateProduct(event,jQuery(this))});jQuery(this.base).bind('re-load',_.throttle(function(event){o.load()},1e3,{trailing:false}));this.base.closest('form').eq(0).commonController('bindElements')}};VoteBarView.prototype.getParams=function(params){params=this.callSupermethod('getParams',arguments);params.product_id=this.productId;if(this.widgetMode)params.widgetMode=this.widgetMode;return params};VoteBarView.prototype.rateProduct=_.throttle(function(event,block){var form=jQuery(block).closest('.product-average-rating'),rating=jQuery('input[name=rating]',form).eq(0).val();this.rating=rating;var productId=jQuery(block).closest('form').find('input[name=product_id]').eq(0).val();if(productId)this.productId=productId;var widgetMode=jQuery(block).closest('form').find('input[name=widgetMode]').eq(0).val();if(widgetMode)this.widgetMode=widgetMode;var blocksThatNeedToBeRefreshed;if(productId){blocksThatNeedToBeRefreshed=jQuery('input[name="product_id"]').filter(function(){return($(this).val()==productId)}).closest('form').filter(function(){return($(this).find(VoteBarController.prototype.findPattern).length>0)})}else blocksThatNeedToBeRefreshed=jQuery(block).closest('form');core.post(URLHandler.buildURL({target:'review',action:'rate'}),function(){jQuery(VoteBarController.prototype.findPattern,blocksThatNeedToBeRefreshed).trigger('re-load')},{product_id:productId,rating:rating});return false},1e3,{trailing:false});VoteBarView.prototype.postprocessRateProduct=function(XMLHttpRequest,textStatus,data,isValid){};core.autoload(VoteBarController);core.bind('list.products.postprocess',function(){core.autoload(VoteBarController)});core.bind('block.product.details.postprocess',function(){core.autoload(VoteBarController)});CommonForm.elementControllers.push({pattern:'.vote-bar.editable .stars-row.hovered .star-single',handler:function(){jQuery(this).hover(function(){if(!this._previous)this._previous=jQuery(this).prevAll();this._previous.each(function(index){jQuery(this).addClass('over')});jQuery(this).addClass('over')},function(){if(!this._previous)this._previous=jQuery(this).prevAll();this._previous.each(function(index){jQuery(this).removeClass('over')});jQuery(this).removeClass('over')}).click(function(){return VoteBarClick(this)})}});CommonForm.elementControllers.push({pattern:'.vote-bar.editable',handler:function(){jQuery(this).hover(function(){jQuery('.stars-row.hovered',this).show()},function(){if(!this._rating){if(!this._previous)this._previous=jQuery(this).children('.star-single');this._previous.each(function(index){jQuery(this).removeClass('over')});jQuery('.stars-row.hovered',this).hide()}else{var rating=this._rating;jQuery('.stars-row.hovered',this).find('.star-single').each(function(index){var j=parseInt(jQuery(this).attr('class').match(/\d+/));if(j>rating){jQuery(this).removeClass('over')}else jQuery(this).addClass('over')})}})}});CommonForm.elementControllers.push({pattern:'div.icon-help',handler:function(){var $tooltip=jQuery('#'+jQuery(this).attr('id')+'_tooltip');jQuery(this).hover(function(){$tooltip.css({display:'block'})},function(){$tooltip.css({display:'none'})})}});;
/* AUTOGENERATED: add_review.js */
function PopupButtonAddReview(){PopupButtonAddReview.superclass.constructor.apply(this,arguments)};extend(PopupButtonAddReview,PopupButton);PopupButtonAddReview.prototype.pattern='.add-review';PopupButton.prototype.enableBackgroundSubmit=false;core.autoload(PopupButtonAddReview);core.bind('block.product.details.postprocess',function(){core.autoload(PopupButtonAddReview)});core.bind('list.products.postprocess',function(){core.autoload(PopupButtonAddReview)});core.microhandlers.add('emailTooltip','.modify-review-dialog .tooltip-main .help-text',function(){attachTooltip(jQuery(this).closest('.tooltip-main').find('.help-icon'),jQuery(this).html())});;
/* AUTOGENERATED: controller.js */
function ProductQuantityBoxView(base){this.base=jQuery(base);if(this.base&&this.base.length&&this.base.find('input.quantity').length>0){this.block=this.base.find('input.quantity');var form=this.block.get(0).form;form.commonController.switchControlReadiness(true);form.commonController.bind('local.ready',_.bind(this.handleFormReady,this)).bind('local.unready',_.bind(this.handleFormUnready,this));this.block.on('input',_.bind(this.handleQuantityChange,this));this.isCartPage=jQuery('div#cart').length>0;if(!this.isCartPage){this.actionButton=jQuery(this.base).parents('div.product-buttons').find('button.add2cart, button.buy-more')}else this.actionButton=jQuery('ul.totals li.button button')};Base.apply(this,arguments);this.initialize()};extend(ProductQuantityBoxView,Base);ProductQuantityBoxView.prototype.base=null;ProductQuantityBoxView.prototype.block=null;ProductQuantityBoxView.prototype.isCartPage=false;ProductQuantityBoxView.prototype.initialize=function(){};ProductQuantityBoxView.prototype.handleQuantityChange=function(event){jQuery(event.currentTarget).change()};ProductQuantityBoxView.prototype.handleFormReady=function(event){this.actionButton.removeAttr('disabled').removeClass('disabled add2cart-disabled')};ProductQuantityBoxView.prototype.handleFormUnready=function(event){this.actionButton.prop('disabled','disabled').addClass('disabled add2cart-disabled')};ProductQuantityBoxView.prototype.getEventNamespace=function(){return'product.details.quantityBox'};core.registerTriggersBind('update-product-page',function(){var container=jQuery('span.quantity-box-container');new ProductQuantityBoxView(container);if(container.parents('form').get(0)&&container.parents('form').get(0).commonController)container.parents('form').get(0).commonController.bindElements()});core.registerShadowWidgets('update-product-page',function(){return'.widget-fingerprint-product-quantity, .widget-fingerprint-product-add-button'});;
/* AUTOGENERATED: script.js */
core.bind('load',function(){decorate('ProductDetailsView','postprocess',function(isSuccess,initial){arguments.callee.previousMethod.apply(this,arguments);if(isSuccess){jQuery('div.add-to-compare.product').mouseleave(function(){jQuery(this).find('div.compare-popup').removeClass('visible')});product_comparison()}})});;
/* AUTOGENERATED: items_list.js */
function ListsController(base){ListsController.superclass.constructor.apply(this,arguments);if(this.base&&this.base.length)this.block=this.getListView()};extend(ListsController,AController);ListsController.prototype.name='ItemsListController';ListsController.prototype.findPattern='.items-list';ListsController.prototype.block=null;ListsController.prototype.selfUpdated=false;ListsController.prototype.getListView=function(){return new ListView(this.base)};ListsController.prototype.initialize=function(){var o=this;this.base.bind('reload',function(event,box){o.bind(box)})}
function ListView(base){this.widgetClass=core.getCommentedData(base,'widget_class');this.widgetTarget=core.getCommentedData(base,'widget_target');this.widgetParams=core.getCommentedData(base,'widget_params');this.listenToHash=core.getCommentedData(base,'listenToHash');this.listenToHashPrefix=core.getCommentedData(base,'listenToHashPrefix');this.replaceState=core.getCommentedData(base,'replaceState');this.replaceStatePrefix=core.getCommentedData(base,'replaceStatePrefix');ListView.superclass.constructor.apply(this,arguments)};extend(ListView,ALoadable);ListView.prototype.shadeWidget=true;ListView.prototype.sessionCell=null;ListView.prototype.postprocess=function(isSuccess,initial){ListView.superclass.postprocess.apply(this,arguments);if(isSuccess){var o=this;jQuery('.pagination a',this.base).click(function(){jQuery('html, body').animate({scrollTop:o.base.offset().top});return!o.load({pageId:core.getValueFromClass(this,'page')})});jQuery('input.page-length').validationEngine();jQuery('input.page-length',this.base).change(function(){core.clearHash('pageId');if(!o.isLoading)if(!jQuery(this).validationEngine('validate')){count=parseInt(jQuery(this).val());if(isNaN(count)){count=10}else if(count<1)count=1;if(count!=jQuery(this).val())jQuery(this).val(count);o.load({itemsPerPage:count})}});jQuery('input.page-length',this.base).keypress(function(event){if(event.keyCode==13)jQuery(event.currentTarget).change()})}};
/* AUTOGENERATED: items_list.js */
decorate('ListView','postprocess',function(isSuccess,initial){arguments.callee.previousMethod.apply(this,arguments);if(isSuccess){var o=this;jQuery('.per-page-box .list-type-grid a',this.base).click(function(){jQuery('html, body').animate({scrollTop:o.base.offset().top});return!o.load({itemsPerPage:jQuery(this).data('items-per-page')})});jQuery('.product-cell > .product').mouseenter(function(){product=jQuery(this);productNameContainer=product.children("h5.product-name");productNameContainerHeight=parseInt(productNameContainer.css("line-height"),10)*2;productName=productNameContainer.children("a");productNameHeight=parseInt(productName.css("height"),10);productMargin=0;if(product.hasClass('low-stock')||product.hasClass('out-of-stock'))productMargin=productMargin-parseInt(product.find(".product-items-available").css("height"),10);if(product.find(".buttons-container").children().length)productMargin=productMargin-parseInt(product.find(".buttons-container").css("height"),10);if(productNameHeight>productNameContainerHeight){productNameDelta=productNameContainerHeight-productNameHeight;product.css({'margin-bottom':productMargin+productNameDelta+'px'})}}).mouseleave(function(){product=jQuery(this);product.removeAttr("style")})}});;
/* AUTOGENERATED: reviews_list.js */
function ReviewsListView(base){ReviewsListView.superclass.constructor.apply(this,arguments)};extend(ReviewsListView,ListView)
function ReviewsListController(base){ReviewsListController.superclass.constructor.apply(this,arguments)};extend(ReviewsListController,ListsController);ReviewsListController.prototype.name='ReviewsListController';ReviewsListController.prototype.findPattern='.items-list.product-reviews';ReviewsListController.prototype.getListView=function(){return new ReviewsListView(this.base)};ReviewsListView.prototype.getEventNamespace=function(){return'list.reviews'};core.autoload(ReviewsListController);;
/* AUTOGENERATED: products_list.js */
function ProductsListView(base){ProductsListView.superclass.constructor.apply(this,arguments);core.bind('popup.close',_.bind(this.handleCloseQuickLookPopup,this));this.requests=[]};extend(ProductsListView,ListView)
function ProductsListController(base){ProductsListController.superclass.constructor.apply(this,arguments);core.bind('updateCart',_.bind(this.updateCartHandler,this))};extend(ProductsListController,ListsController);ProductsListController.prototype.name='ProductsListController';ProductsListController.prototype.findPattern+='.items-list-products';ProductsListController.prototype.getListView=function(){return new ProductsListView(this.base)};ProductsListController.prototype.updateCartHandler=function(event,data){var productPattern,product;if(_.isUndefined(data.items))return;for(var i=0;i<data.items.length;i++)if(data.items[i].object_type=='product'){productPattern='.product.productid-'+data.items[i].object_id;product=jQuery(productPattern,this.base);if(data.items[i].quantity>0){product.addClass('product-added');if(this.block)this.block.triggerVent('item.addedToCart',{view:this,item:product})}else{product.removeClass('product-added');if(this.block)this.block.triggerVent('item.removedFromCart',{view:this,item:product})};if(data.items[i].is_limit){product.addClass('out-of-stock');if(this.block)this.block.triggerVent('item.outOfStock',{view:this,item:product})}else{product.removeClass('out-of-stock');if(this.block)this.block.triggerVent('item.stockIncrease',{view:this,item:product})}}};ProductsListView.prototype.postprocess=function(isSuccess,initial){ProductsListView.superclass.postprocess.apply(this,arguments);var self=this;if(isSuccess){jQuery('.products-table .column-switcher',this.base).commonController('markAsColumnSwitcher');if(jQuery.browser.msie)jQuery(this.productPattern,this.base).find('a').each(function(){this.defferHref=this.href;this.href='javascript:void(0);'}).click(function(){if(!self.base.hasClass('ie-link-blocker'))window.self.location=this.defferHref});jQuery('.display-modes a',this.base).click(function(){core.clearHash('pageId');return!self.load({displayMode:jQuery(this).attr('class')})});jQuery('.sort-crit a',this.base).click(function(){core.clearHash('pageId');return!self.load({sortBy:jQuery(this).data('sort-by'),sortOrder:jQuery(this).data('sort-order'),mode:'append'})});core.bind('afterPopupPlace',function(){new ProductDetailsController(jQuery('.ui-dialog div.product-quicklook'))});this.base.find('table.products-grid tr').each(function(){var height=0;jQuery('div.product',this).each(function(){height=Math.max(height,jQuery(this).height())})});jQuery('.add-to-cart',this.base).not('.link').each(function(index,elem){jQuery(elem).click(function(){var product=$(elem).closest('.product-cell').find('.product');if(!product.length)product=$(elem).closest('.product-cell');var pid=core.getValueFromClass(product,'productid'),forceOptions=product.is('.need-choose-options'),btnStateHolder=$(elem).prop('disabled');if(pid&&!self.isLoading)$(elem).prop('disabled',true);if(forceOptions){$(elem).prop('disabled',btnStateHolder);self.openQuickLook(product)}else{core.trigger('addToCartViaClick',{productId:pid});self.addToCart(elem).always(function(){$(elem).prop('disabled',btnStateHolder)})}})})}};ProductsListView.prototype.productPattern='.products-grid .product, .products-list .product, .products-sidebar .product';ProductsListView.prototype.addToCart=function(elem){elem=jQuery(elem);var pid=core.getValueFromClass(elem,'productid'),xhr=new $.Deferred();if(pid&&!this.isLoading){if(this)xhr=core.post(URLHandler.buildURL({target:'cart',action:'add'}),_.bind(this.handleAddToCart,this),this.addToCartRequestParams(elem),{rpc:true})}else xhr.reject();return xhr};ProductsListView.prototype.addToCartRequestParams=function(elem){var pid=core.getValueFromClass(elem,'productid');return{target:'cart',action:'add',product_id:pid}};ProductsListView.prototype.handleAddToCart=function(XMLHttpRequest,textStatus,data,isValid){if(!isValid)core.trigger('message',{text:'An error occurred during adding the product to cart. Please refresh the page and try to drag the product to cart again or contact the store administrator.',type:'error'})};ProductsListView.prototype.focusOnFirstOption=_.once(function(){core.bind('afterPopupPlace',function(event,data){if(popup.currentPopup.box.hasClass('ctrl-customer-quicklook')){var option=popup.currentPopup.box.find('.editable-attributes select, input').filter(':visible').first();option.focus()}})});ProductsListView.prototype.openQuickLook=function(elem){this.focusOnFirstOption();return!popup.load(URLHandler.buildURL(this.openQuickLookParams(elem)),function(){jQuery('.formError').hide()},5e4)};ProductsListView.prototype.handleCloseQuickLookPopup=function(event,data){if(data.box&&data.box.find('.product-quicklook').length>0&&jQuery('body').find(data.box).length>0){data.box.dialog('destroy');data.box.remove()}};ProductsListView.prototype.openQuickLookParams=function(elem){var product_id=core.getValueFromClass(elem,'productid');return{target:'quick_look',action:'',product_id:product_id,only_center:1}};ProductsListView.prototype.getEventNamespace=function(){return'list.products'};core.autoload(ProductsListController);;
/* AUTOGENERATED: script.js */
core.bind('load',function(){decorate('ProductsListView','postprocess',function(isSuccess,initial){arguments.callee.previousMethod.apply(this,arguments);if(isSuccess){jQuery('div.product').mouseover(function(){jQuery(this).addClass('compare')}).mouseout(function(){jQuery(this).removeClass('compare')});jQuery('div.add-to-compare.products div.compare-popup').mouseleave(function(){jQuery(this).removeClass('visible')});product_comparison()}})});;
/* AUTOGENERATED: details_gallery.js */
core.bind('init-cycle-gallery',function(){var initGallery=function(){var count=$(this).data('cycle-carousel-visible');if(!$(this).find('.cycle-carousel-wrap').length)if($(this).find($(this).data('cycle-slides')).length<=count){$($(this).data('cycle-next')).hide();$($(this).data('cycle-prev')).hide()}else{$($(this).data('cycle-next')).show();$($(this).data('cycle-prev')).show();$(this).cycle()}},changeVisibleElemsCount=function(){var elemCount=Math.floor($(this).closest('.slides').width()/$(this).find('li').first().outerWidth(true));elemCount=Math.min(elemCount,$(this).find('li').length);var changed=false;if($(this).data('cycle-carousel-visible')!=elemCount&&!isNaN(elemCount)){$(this).attr('data-cycle-carousel-visible',elemCount);$(this).data('cycle-carousel-visible',elemCount);if($(this).data('cycle.opts')!==undefined)$(this).cycle('destroy');changed=true};return changed};$('.cycle-slideshow').each(function(){if($(this).closest('.product-image-gallery').hasClass('mobile')){changeVisibleElemsCount.apply(this);jQuery(window).resize(_.debounce(_.bind(function(){if(changeVisibleElemsCount.apply(this))initGallery.apply(this)},this),50))};initGallery.apply(this)})});jQuery(function(){core.trigger('init-cycle-gallery');core.bind('block.product.details.postprocess',function(){core.trigger('init-cycle-gallery')});$('.cycle-cloak.cycle-slideshow').on('cycle-initialized',function(event,opts){$(this).removeClass('.cycle-cloak')})});;
/* AUTOGENERATED: jquery.cycle2.min.js */
/*!
* jQuery Cycle2; version: 2.1.6 build: 20141007
* http://jquery.malsup.com/cycle2/
* Copyright (c) 2014 M. Alsup; Dual licensed: MIT/GPL
*/
!function(a){"use strict";function b(a){return(a||"").toLowerCase()}var c="2.1.6";a.fn.cycle=function(c){var d;return 0!==this.length||a.isReady?this.each(function(){var d,e,f,g,h=a(this),i=a.fn.cycle.log;if(!h.data("cycle.opts")){(h.data("cycle-log")===!1||c&&c.log===!1||e&&e.log===!1)&&(i=a.noop),i("--c2 init--"),d=h.data();for(var j in d)d.hasOwnProperty(j)&&/^cycle[A-Z]+/.test(j)&&(g=d[j],f=j.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,b),i(f+":",g,"("+typeof g+")"),d[f]=g);e=a.extend({},a.fn.cycle.defaults,d,c||{}),e.timeoutId=0,e.paused=e.paused||!1,e.container=h,e._maxZ=e.maxZ,e.API=a.extend({_container:h},a.fn.cycle.API),e.API.log=i,e.API.trigger=function(a,b){return e.container.trigger(a,b),e.API},h.data("cycle.opts",e),h.data("cycle.API",e.API),e.API.trigger("cycle-bootstrap",[e,e.API]),e.API.addInitialSlides(),e.API.preInitSlideshow(),e.slides.length&&e.API.initSlideshow()}}):(d={s:this.selector,c:this.context},a.fn.cycle.log("requeuing slideshow (dom not ready)"),a(function(){a(d.s,d.c).cycle(c)}),this)},a.fn.cycle.API={opts:function(){return this._container.data("cycle.opts")},addInitialSlides:function(){var b=this.opts(),c=b.slides;b.slideCount=0,b.slides=a(),c=c.jquery?c:b.container.find(c),b.random&&c.sort(function(){return Math.random()-.5}),b.API.add(c)},preInitSlideshow:function(){var b=this.opts();b.API.trigger("cycle-pre-initialize",[b]);var c=a.fn.cycle.transitions[b.fx];c&&a.isFunction(c.preInit)&&c.preInit(b),b._preInitialized=!0},postInitSlideshow:function(){var b=this.opts();b.API.trigger("cycle-post-initialize",[b]);var c=a.fn.cycle.transitions[b.fx];c&&a.isFunction(c.postInit)&&c.postInit(b)},initSlideshow:function(){var b,c=this.opts(),d=c.container;c.API.calcFirstSlide(),"static"==c.container.css("position")&&c.container.css("position","relative"),a(c.slides[c.currSlide]).css({opacity:1,display:"block",visibility:"visible"}),c.API.stackSlides(c.slides[c.currSlide],c.slides[c.nextSlide],!c.reverse),c.pauseOnHover&&(c.pauseOnHover!==!0&&(d=a(c.pauseOnHover)),d.hover(function(){c.API.pause(!0)},function(){c.API.resume(!0)})),c.timeout&&(b=c.API.getSlideOpts(c.currSlide),c.API.queueTransition(b,b.timeout+c.delay)),c._initialized=!0,c.API.updateView(!0),c.API.trigger("cycle-initialized",[c]),c.API.postInitSlideshow()},pause:function(b){var c=this.opts(),d=c.API.getSlideOpts(),e=c.hoverPaused||c.paused;b?c.hoverPaused=!0:c.paused=!0,e||(c.container.addClass("cycle-paused"),c.API.trigger("cycle-paused",[c]).log("cycle-paused"),d.timeout&&(clearTimeout(c.timeoutId),c.timeoutId=0,c._remainingTimeout-=a.now()-c._lastQueue,(c._remainingTimeout<0||isNaN(c._remainingTimeout))&&(c._remainingTimeout=void 0)))},resume:function(a){var b=this.opts(),c=!b.hoverPaused&&!b.paused;a?b.hoverPaused=!1:b.paused=!1,c||(b.container.removeClass("cycle-paused"),0===b.slides.filter(":animated").length&&b.API.queueTransition(b.API.getSlideOpts(),b._remainingTimeout),b.API.trigger("cycle-resumed",[b,b._remainingTimeout]).log("cycle-resumed"))},add:function(b,c){var d,e=this.opts(),f=e.slideCount,g=!1;"string"==a.type(b)&&(b=a.trim(b)),a(b).each(function(){var b,d=a(this);c?e.container.prepend(d):e.container.append(d),e.slideCount++,b=e.API.buildSlideOpts(d),e.slides=c?a(d).add(e.slides):e.slides.add(d),e.API.initSlide(b,d,--e._maxZ),d.data("cycle.opts",b),e.API.trigger("cycle-slide-added",[e,b,d])}),e.API.updateView(!0),g=e._preInitialized&&2>f&&e.slideCount>=1,g&&(e._initialized?e.timeout&&(d=e.slides.length,e.nextSlide=e.reverse?d-1:1,e.timeoutId||e.API.queueTransition(e)):e.API.initSlideshow())},calcFirstSlide:function(){var a,b=this.opts();a=parseInt(b.startingSlide||0,10),(a>=b.slides.length||0>a)&&(a=0),b.currSlide=a,b.reverse?(b.nextSlide=a-1,b.nextSlide<0&&(b.nextSlide=b.slides.length-1)):(b.nextSlide=a+1,b.nextSlide==b.slides.length&&(b.nextSlide=0))},calcNextSlide:function(){var a,b=this.opts();b.reverse?(a=b.nextSlide-1<0,b.nextSlide=a?b.slideCount-1:b.nextSlide-1,b.currSlide=a?0:b.nextSlide+1):(a=b.nextSlide+1==b.slides.length,b.nextSlide=a?0:b.nextSlide+1,b.currSlide=a?b.slides.length-1:b.nextSlide-1)},calcTx:function(b,c){var d,e=b;return e._tempFx?d=a.fn.cycle.transitions[e._tempFx]:c&&e.manualFx&&(d=a.fn.cycle.transitions[e.manualFx]),d||(d=a.fn.cycle.transitions[e.fx]),e._tempFx=null,this.opts()._tempFx=null,d||(d=a.fn.cycle.transitions.fade,e.API.log('Transition "'+e.fx+'" not found.  Using fade.')),d},prepareTx:function(a,b){var c,d,e,f,g,h=this.opts();return h.slideCount<2?void(h.timeoutId=0):(!a||h.busy&&!h.manualTrump||(h.API.stopTransition(),h.busy=!1,clearTimeout(h.timeoutId),h.timeoutId=0),void(h.busy||(0!==h.timeoutId||a)&&(d=h.slides[h.currSlide],e=h.slides[h.nextSlide],f=h.API.getSlideOpts(h.nextSlide),g=h.API.calcTx(f,a),h._tx=g,a&&void 0!==f.manualSpeed&&(f.speed=f.manualSpeed),h.nextSlide!=h.currSlide&&(a||!h.paused&&!h.hoverPaused&&h.timeout)?(h.API.trigger("cycle-before",[f,d,e,b]),g.before&&g.before(f,d,e,b),c=function(){h.busy=!1,h.container.data("cycle.opts")&&(g.after&&g.after(f,d,e,b),h.API.trigger("cycle-after",[f,d,e,b]),h.API.queueTransition(f),h.API.updateView(!0))},h.busy=!0,g.transition?g.transition(f,d,e,b,c):h.API.doTransition(f,d,e,b,c),h.API.calcNextSlide(),h.API.updateView()):h.API.queueTransition(f))))},doTransition:function(b,c,d,e,f){var g=b,h=a(c),i=a(d),j=function(){i.animate(g.animIn||{opacity:1},g.speed,g.easeIn||g.easing,f)};i.css(g.cssBefore||{}),h.animate(g.animOut||{},g.speed,g.easeOut||g.easing,function(){h.css(g.cssAfter||{}),g.sync||j()}),g.sync&&j()},queueTransition:function(b,c){var d=this.opts(),e=void 0!==c?c:b.timeout;return 0===d.nextSlide&&0===--d.loop?(d.API.log("terminating; loop=0"),d.timeout=0,e?setTimeout(function(){d.API.trigger("cycle-finished",[d])},e):d.API.trigger("cycle-finished",[d]),void(d.nextSlide=d.currSlide)):void 0!==d.continueAuto&&(d.continueAuto===!1||a.isFunction(d.continueAuto)&&d.continueAuto()===!1)?(d.API.log("terminating automatic transitions"),d.timeout=0,void(d.timeoutId&&clearTimeout(d.timeoutId))):void(e&&(d._lastQueue=a.now(),void 0===c&&(d._remainingTimeout=b.timeout),d.paused||d.hoverPaused||(d.timeoutId=setTimeout(function(){d.API.prepareTx(!1,!d.reverse)},e))))},stopTransition:function(){var a=this.opts();a.slides.filter(":animated").length&&(a.slides.stop(!1,!0),a.API.trigger("cycle-transition-stopped",[a])),a._tx&&a._tx.stopTransition&&a._tx.stopTransition(a)},advanceSlide:function(a){var b=this.opts();return clearTimeout(b.timeoutId),b.timeoutId=0,b.nextSlide=b.currSlide+a,b.nextSlide<0?b.nextSlide=b.slides.length-1:b.nextSlide>=b.slides.length&&(b.nextSlide=0),b.API.prepareTx(!0,a>=0),!1},buildSlideOpts:function(c){var d,e,f=this.opts(),g=c.data()||{};for(var h in g)g.hasOwnProperty(h)&&/^cycle[A-Z]+/.test(h)&&(d=g[h],e=h.match(/^cycle(.*)/)[1].replace(/^[A-Z]/,b),f.API.log("["+(f.slideCount-1)+"]",e+":",d,"("+typeof d+")"),g[e]=d);g=a.extend({},a.fn.cycle.defaults,f,g),g.slideNum=f.slideCount;try{delete g.API,delete g.slideCount,delete g.currSlide,delete g.nextSlide,delete g.slides}catch(i){}return g},getSlideOpts:function(b){var c=this.opts();void 0===b&&(b=c.currSlide);var d=c.slides[b],e=a(d).data("cycle.opts");return a.extend({},c,e)},initSlide:function(b,c,d){var e=this.opts();c.css(b.slideCss||{}),d>0&&c.css("zIndex",d),isNaN(b.speed)&&(b.speed=a.fx.speeds[b.speed]||a.fx.speeds._default),b.sync||(b.speed=b.speed/2),c.addClass(e.slideClass)},updateView:function(a,b){var c=this.opts();if(c._initialized){var d=c.API.getSlideOpts(),e=c.slides[c.currSlide];!a&&b!==!0&&(c.API.trigger("cycle-update-view-before",[c,d,e]),c.updateView<0)||(c.slideActiveClass&&c.slides.removeClass(c.slideActiveClass).eq(c.currSlide).addClass(c.slideActiveClass),a&&c.hideNonActive&&c.slides.filter(":not(."+c.slideActiveClass+")").css("visibility","hidden"),0===c.updateView&&setTimeout(function(){c.API.trigger("cycle-update-view",[c,d,e,a])},d.speed/(c.sync?2:1)),0!==c.updateView&&c.API.trigger("cycle-update-view",[c,d,e,a]),a&&c.API.trigger("cycle-update-view-after",[c,d,e]))}},getComponent:function(b){var c=this.opts(),d=c[b];return"string"==typeof d?/^\s*[\>|\+|~]/.test(d)?c.container.find(d):a(d):d.jquery?d:a(d)},stackSlides:function(b,c,d){var e=this.opts();b||(b=e.slides[e.currSlide],c=e.slides[e.nextSlide],d=!e.reverse),a(b).css("zIndex",e.maxZ);var f,g=e.maxZ-2,h=e.slideCount;if(d){for(f=e.currSlide+1;h>f;f++)a(e.slides[f]).css("zIndex",g--);for(f=0;f<e.currSlide;f++)a(e.slides[f]).css("zIndex",g--)}else{for(f=e.currSlide-1;f>=0;f--)a(e.slides[f]).css("zIndex",g--);for(f=h-1;f>e.currSlide;f--)a(e.slides[f]).css("zIndex",g--)}a(c).css("zIndex",e.maxZ-1)},getSlideIndex:function(a){return this.opts().slides.index(a)}},a.fn.cycle.log=function(){window.console&&console.log&&console.log("[cycle2] "+Array.prototype.join.call(arguments," "))},a.fn.cycle.version=function(){return"Cycle2: "+c},a.fn.cycle.transitions={custom:{},none:{before:function(a,b,c,d){a.API.stackSlides(c,b,d),a.cssBefore={opacity:1,visibility:"visible",display:"block"}}},fade:{before:function(b,c,d,e){var f=b.API.getSlideOpts(b.nextSlide).slideCss||{};b.API.stackSlides(c,d,e),b.cssBefore=a.extend(f,{opacity:0,visibility:"visible",display:"block"}),b.animIn={opacity:1},b.animOut={opacity:0}}},fadeout:{before:function(b,c,d,e){var f=b.API.getSlideOpts(b.nextSlide).slideCss||{};b.API.stackSlides(c,d,e),b.cssBefore=a.extend(f,{opacity:1,visibility:"visible",display:"block"}),b.animOut={opacity:0}}},scrollHorz:{before:function(a,b,c,d){a.API.stackSlides(b,c,d);var e=a.container.css("overflow","hidden").width();a.cssBefore={left:d?e:-e,top:0,opacity:1,visibility:"visible",display:"block"},a.cssAfter={zIndex:a._maxZ-2,left:0},a.animIn={left:0},a.animOut={left:d?-e:e}}}},a.fn.cycle.defaults={allowWrap:!0,autoSelector:".cycle-slideshow[data-cycle-auto-init!=false]",delay:0,easing:null,fx:"fade",hideNonActive:!0,loop:0,manualFx:void 0,manualSpeed:void 0,manualTrump:!0,maxZ:100,pauseOnHover:!1,reverse:!1,slideActiveClass:"cycle-slide-active",slideClass:"cycle-slide",slideCss:{position:"absolute",top:0,left:0},slides:"> img",speed:500,startingSlide:0,sync:!0,timeout:4e3,updateView:0},a(document).ready(function(){a(a.fn.cycle.defaults.autoSelector).cycle()})}(jQuery),/*! Cycle2 autoheight plugin; Copyright (c) M.Alsup, 2012; version: 20130913 */
function(a){"use strict";function b(b,d){var e,f,g,h=d.autoHeight;if("container"==h)f=a(d.slides[d.currSlide]).outerHeight(),d.container.height(f);else if(d._autoHeightRatio)d.container.height(d.container.width()/d._autoHeightRatio);else if("calc"===h||"number"==a.type(h)&&h>=0){if(g="calc"===h?c(b,d):h>=d.slides.length?0:h,g==d._sentinelIndex)return;d._sentinelIndex=g,d._sentinel&&d._sentinel.remove(),e=a(d.slides[g].cloneNode(!0)),e.removeAttr("id name rel").find("[id],[name],[rel]").removeAttr("id name rel"),e.css({position:"static",visibility:"hidden",display:"block"}).prependTo(d.container).addClass("cycle-sentinel cycle-slide").removeClass("cycle-slide-active"),e.find("*").css("visibility","hidden"),d._sentinel=e}}function c(b,c){var d=0,e=-1;return c.slides.each(function(b){var c=a(this).height();c>e&&(e=c,d=b)}),d}function d(b,c,d,e){var f=a(e).outerHeight();c.container.animate({height:f},c.autoHeightSpeed,c.autoHeightEasing)}function e(c,f){f._autoHeightOnResize&&(a(window).off("resize orientationchange",f._autoHeightOnResize),f._autoHeightOnResize=null),f.container.off("cycle-slide-added cycle-slide-removed",b),f.container.off("cycle-destroyed",e),f.container.off("cycle-before",d),f._sentinel&&(f._sentinel.remove(),f._sentinel=null)}a.extend(a.fn.cycle.defaults,{autoHeight:0,autoHeightSpeed:250,autoHeightEasing:null}),a(document).on("cycle-initialized",function(c,f){function g(){b(c,f)}var h,i=f.autoHeight,j=a.type(i),k=null;("string"===j||"number"===j)&&(f.container.on("cycle-slide-added cycle-slide-removed",b),f.container.on("cycle-destroyed",e),"container"==i?f.container.on("cycle-before",d):"string"===j&&/\d+\:\d+/.test(i)&&(h=i.match(/(\d+)\:(\d+)/),h=h[1]/h[2],f._autoHeightRatio=h),"number"!==j&&(f._autoHeightOnResize=function(){clearTimeout(k),k=setTimeout(g,50)},a(window).on("resize orientationchange",f._autoHeightOnResize)),setTimeout(g,30))})}(jQuery),/*! caption plugin for Cycle2;  version: 20130306 */
function(a){"use strict";a.extend(a.fn.cycle.defaults,{caption:"> .cycle-caption",captionTemplate:"{{slideNum}} / {{slideCount}}",overlay:"> .cycle-overlay",overlayTemplate:"<div>{{title}}</div><div>{{desc}}</div>",captionModule:"caption"}),a(document).on("cycle-update-view",function(b,c,d,e){if("caption"===c.captionModule){a.each(["caption","overlay"],function(){var a=this,b=d[a+"Template"],f=c.API.getComponent(a);f.length&&b?(f.html(c.API.tmpl(b,d,c,e)),f.show()):f.hide()})}}),a(document).on("cycle-destroyed",function(b,c){var d;a.each(["caption","overlay"],function(){var a=this,b=c[a+"Template"];c[a]&&b&&(d=c.API.getComponent("caption"),d.empty())})})}(jQuery),/*! command plugin for Cycle2;  version: 20140415 */
function(a){"use strict";var b=a.fn.cycle;a.fn.cycle=function(c){var d,e,f,g=a.makeArray(arguments);return"number"==a.type(c)?this.cycle("goto",c):"string"==a.type(c)?this.each(function(){var h;return d=c,f=a(this).data("cycle.opts"),void 0===f?void b.log('slideshow must be initialized before sending commands; "'+d+'" ignored'):(d="goto"==d?"jump":d,e=f.API[d],a.isFunction(e)?(h=a.makeArray(g),h.shift(),e.apply(f.API,h)):void b.log("unknown command: ",d))}):b.apply(this,arguments)},a.extend(a.fn.cycle,b),a.extend(b.API,{next:function(){var a=this.opts();if(!a.busy||a.manualTrump){var b=a.reverse?-1:1;a.allowWrap===!1&&a.currSlide+b>=a.slideCount||(a.API.advanceSlide(b),a.API.trigger("cycle-next",[a]).log("cycle-next"))}},prev:function(){var a=this.opts();if(!a.busy||a.manualTrump){var b=a.reverse?1:-1;a.allowWrap===!1&&a.currSlide+b<0||(a.API.advanceSlide(b),a.API.trigger("cycle-prev",[a]).log("cycle-prev"))}},destroy:function(){this.stop();var b=this.opts(),c=a.isFunction(a._data)?a._data:a.noop;clearTimeout(b.timeoutId),b.timeoutId=0,b.API.stop(),b.API.trigger("cycle-destroyed",[b]).log("cycle-destroyed"),b.container.removeData(),c(b.container[0],"parsedAttrs",!1),b.retainStylesOnDestroy||(b.container.removeAttr("style"),b.slides.removeAttr("style"),b.slides.removeClass(b.slideActiveClass)),b.slides.each(function(){var d=a(this);d.removeData(),d.removeClass(b.slideClass),c(this,"parsedAttrs",!1)})},jump:function(a,b){var c,d=this.opts();if(!d.busy||d.manualTrump){var e=parseInt(a,10);if(isNaN(e)||0>e||e>=d.slides.length)return void d.API.log("goto: invalid slide index: "+e);if(e==d.currSlide)return void d.API.log("goto: skipping, already on slide",e);d.nextSlide=e,clearTimeout(d.timeoutId),d.timeoutId=0,d.API.log("goto: ",e," (zero-index)"),c=d.currSlide<d.nextSlide,d._tempFx=b,d.API.prepareTx(!0,c)}},stop:function(){var b=this.opts(),c=b.container;clearTimeout(b.timeoutId),b.timeoutId=0,b.API.stopTransition(),b.pauseOnHover&&(b.pauseOnHover!==!0&&(c=a(b.pauseOnHover)),c.off("mouseenter mouseleave")),b.API.trigger("cycle-stopped",[b]).log("cycle-stopped")},reinit:function(){var a=this.opts();a.API.destroy(),a.container.cycle()},remove:function(b){for(var c,d,e=this.opts(),f=[],g=1,h=0;h<e.slides.length;h++)c=e.slides[h],h==b?d=c:(f.push(c),a(c).data("cycle.opts").slideNum=g,g++);d&&(e.slides=a(f),e.slideCount--,a(d).remove(),b==e.currSlide?e.API.advanceSlide(1):b<e.currSlide?e.currSlide--:e.currSlide++,e.API.trigger("cycle-slide-removed",[e,b,d]).log("cycle-slide-removed"),e.API.updateView())}}),a(document).on("click.cycle","[data-cycle-cmd]",function(b){b.preventDefault();var c=a(this),d=c.data("cycle-cmd"),e=c.data("cycle-context")||".cycle-slideshow";a(e).cycle(d,c.data("cycle-arg"))})}(jQuery),/*! hash plugin for Cycle2;  version: 20130905 */
function(a){"use strict";function b(b,c){var d;return b._hashFence?void(b._hashFence=!1):(d=window.location.hash.substring(1),void b.slides.each(function(e){if(a(this).data("cycle-hash")==d){if(c===!0)b.startingSlide=e;else{var f=b.currSlide<e;b.nextSlide=e,b.API.prepareTx(!0,f)}return!1}}))}a(document).on("cycle-pre-initialize",function(c,d){b(d,!0),d._onHashChange=function(){b(d,!1)},a(window).on("hashchange",d._onHashChange)}),a(document).on("cycle-update-view",function(a,b,c){c.hash&&"#"+c.hash!=window.location.hash&&(b._hashFence=!0,window.location.hash=c.hash)}),a(document).on("cycle-destroyed",function(b,c){c._onHashChange&&a(window).off("hashchange",c._onHashChange)})}(jQuery),/*! loader plugin for Cycle2;  version: 20131121 */
function(a){"use strict";a.extend(a.fn.cycle.defaults,{loader:!1}),a(document).on("cycle-bootstrap",function(b,c){function d(b,d){function f(b){var f;"wait"==c.loader?(h.push(b),0===j&&(h.sort(g),e.apply(c.API,[h,d]),c.container.removeClass("cycle-loading"))):(f=a(c.slides[c.currSlide]),e.apply(c.API,[b,d]),f.show(),c.container.removeClass("cycle-loading"))}function g(a,b){return a.data("index")-b.data("index")}var h=[];if("string"==a.type(b))b=a.trim(b);else if("array"===a.type(b))for(var i=0;i<b.length;i++)b[i]=a(b[i])[0];b=a(b);var j=b.length;j&&(b.css("visibility","hidden").appendTo("body").each(function(b){function g(){0===--i&&(--j,f(k))}var i=0,k=a(this),l=k.is("img")?k:k.find("img");return k.data("index",b),l=l.filter(":not(.cycle-loader-ignore)").filter(':not([src=""])'),l.length?(i=l.length,void l.each(function(){this.complete?g():a(this).load(function(){g()}).on("error",function(){0===--i&&(c.API.log("slide skipped; img not loaded:",this.src),0===--j&&"wait"==c.loader&&e.apply(c.API,[h,d]))})})):(--j,void h.push(k))}),j&&c.container.addClass("cycle-loading"))}var e;c.loader&&(e=c.API.add,c.API.add=d)})}(jQuery),/*! pager plugin for Cycle2;  version: 20140415 */
function(a){"use strict";function b(b,c,d){var e,f=b.API.getComponent("pager");f.each(function(){var f=a(this);if(c.pagerTemplate){var g=b.API.tmpl(c.pagerTemplate,c,b,d[0]);e=a(g).appendTo(f)}else e=f.children().eq(b.slideCount-1);e.on(b.pagerEvent,function(a){b.pagerEventBubble||a.preventDefault(),b.API.page(f,a.currentTarget)})})}function c(a,b){var c=this.opts();if(!c.busy||c.manualTrump){var d=a.children().index(b),e=d,f=c.currSlide<e;c.currSlide!=e&&(c.nextSlide=e,c._tempFx=c.pagerFx,c.API.prepareTx(!0,f),c.API.trigger("cycle-pager-activated",[c,a,b]))}}a.extend(a.fn.cycle.defaults,{pager:"> .cycle-pager",pagerActiveClass:"cycle-pager-active",pagerEvent:"click.cycle",pagerEventBubble:void 0,pagerTemplate:"<span>&bull;</span>"}),a(document).on("cycle-bootstrap",function(a,c,d){d.buildPagerLink=b}),a(document).on("cycle-slide-added",function(a,b,d,e){b.pager&&(b.API.buildPagerLink(b,d,e),b.API.page=c)}),a(document).on("cycle-slide-removed",function(b,c,d){if(c.pager){var e=c.API.getComponent("pager");e.each(function(){var b=a(this);a(b.children()[d]).remove()})}}),a(document).on("cycle-update-view",function(b,c){var d;c.pager&&(d=c.API.getComponent("pager"),d.each(function(){a(this).children().removeClass(c.pagerActiveClass).eq(c.currSlide).addClass(c.pagerActiveClass)}))}),a(document).on("cycle-destroyed",function(a,b){var c=b.API.getComponent("pager");c&&(c.children().off(b.pagerEvent),b.pagerTemplate&&c.empty())})}(jQuery),/*! prevnext plugin for Cycle2;  version: 20140408 */
function(a){"use strict";a.extend(a.fn.cycle.defaults,{next:"> .cycle-next",nextEvent:"click.cycle",disabledClass:"disabled",prev:"> .cycle-prev",prevEvent:"click.cycle",swipe:!1}),a(document).on("cycle-initialized",function(a,b){if(b.API.getComponent("next").on(b.nextEvent,function(a){a.preventDefault(),b.API.next()}),b.API.getComponent("prev").on(b.prevEvent,function(a){a.preventDefault(),b.API.prev()}),b.swipe){var c=b.swipeVert?"swipeUp.cycle":"swipeLeft.cycle swipeleft.cycle",d=b.swipeVert?"swipeDown.cycle":"swipeRight.cycle swiperight.cycle";b.container.on(c,function(){b._tempFx=b.swipeFx,b.API.next()}),b.container.on(d,function(){b._tempFx=b.swipeFx,b.API.prev()})}}),a(document).on("cycle-update-view",function(a,b){if(!b.allowWrap){var c=b.disabledClass,d=b.API.getComponent("next"),e=b.API.getComponent("prev"),f=b._prevBoundry||0,g=void 0!==b._nextBoundry?b._nextBoundry:b.slideCount-1;b.currSlide==g?d.addClass(c).prop("disabled",!0):d.removeClass(c).prop("disabled",!1),b.currSlide===f?e.addClass(c).prop("disabled",!0):e.removeClass(c).prop("disabled",!1)}}),a(document).on("cycle-destroyed",function(a,b){b.API.getComponent("prev").off(b.nextEvent),b.API.getComponent("next").off(b.prevEvent),b.container.off("swipeleft.cycle swiperight.cycle swipeLeft.cycle swipeRight.cycle swipeUp.cycle swipeDown.cycle")})}(jQuery),/*! progressive loader plugin for Cycle2;  version: 20130315 */
function(a){"use strict";a.extend(a.fn.cycle.defaults,{progressive:!1}),a(document).on("cycle-pre-initialize",function(b,c){if(c.progressive){var d,e,f=c.API,g=f.next,h=f.prev,i=f.prepareTx,j=a.type(c.progressive);if("array"==j)d=c.progressive;else if(a.isFunction(c.progressive))d=c.progressive(c);else if("string"==j){if(e=a(c.progressive),d=a.trim(e.html()),!d)return;if(/^(\[)/.test(d))try{d=a.parseJSON(d)}catch(k){return void f.log("error parsing progressive slides",k)}else d=d.split(new RegExp(e.data("cycle-split")||"\n")),d[d.length-1]||d.pop()}i&&(f.prepareTx=function(a,b){var e,f;return a||0===d.length?void i.apply(c.API,[a,b]):void(b&&c.currSlide==c.slideCount-1?(f=d[0],d=d.slice(1),c.container.one("cycle-slide-added",function(a,b){setTimeout(function(){b.API.advanceSlide(1)},50)}),c.API.add(f)):b||0!==c.currSlide?i.apply(c.API,[a,b]):(e=d.length-1,f=d[e],d=d.slice(0,e),c.container.one("cycle-slide-added",function(a,b){setTimeout(function(){b.currSlide=1,b.API.advanceSlide(-1)},50)}),c.API.add(f,!0)))}),g&&(f.next=function(){var a=this.opts();if(d.length&&a.currSlide==a.slideCount-1){var b=d[0];d=d.slice(1),a.container.one("cycle-slide-added",function(a,b){g.apply(b.API),b.container.removeClass("cycle-loading")}),a.container.addClass("cycle-loading"),a.API.add(b)}else g.apply(a.API)}),h&&(f.prev=function(){var a=this.opts();if(d.length&&0===a.currSlide){var b=d.length-1,c=d[b];d=d.slice(0,b),a.container.one("cycle-slide-added",function(a,b){b.currSlide=1,b.API.advanceSlide(-1),b.container.removeClass("cycle-loading")}),a.container.addClass("cycle-loading"),a.API.add(c,!0)}else h.apply(a.API)})}})}(jQuery),/*! tmpl plugin for Cycle2;  version: 20121227 */
function(a){"use strict";a.extend(a.fn.cycle.defaults,{tmplRegex:"{{((.)?.*?)}}"}),a.extend(a.fn.cycle.API,{tmpl:function(b,c){var d=new RegExp(c.tmplRegex||a.fn.cycle.defaults.tmplRegex,"g"),e=a.makeArray(arguments);return e.shift(),b.replace(d,function(b,c){var d,f,g,h,i=c.split(".");for(d=0;d<e.length;d++)if(g=e[d]){if(i.length>1)for(h=g,f=0;f<i.length;f++)g=h,h=h[i[f]]||c;else h=g[c];if(a.isFunction(h))return h.apply(g,e);if(void 0!==h&&null!==h&&h!=c)return h}return c})}})}(jQuery);;
/* AUTOGENERATED: jquery.cycle2.carousel.min.js */
/* Plugin for Cycle2; Copyright (c) 2012 M. Alsup; v20141007 */
!function(a){"use strict";a(document).on("cycle-bootstrap",function(a,b,c){"carousel"===b.fx&&(c.getSlideIndex=function(a){var b=this.opts()._carouselWrap.children(),c=b.index(a);return c%b.length},c.next=function(){var a=b.reverse?-1:1;b.allowWrap===!1&&b.currSlide+a>b.slideCount-b.carouselVisible||(b.API.advanceSlide(a),b.API.trigger("cycle-next",[b]).log("cycle-next"))})}),a.fn.cycle.transitions.carousel={preInit:function(b){b.hideNonActive=!1,b.container.on("cycle-destroyed",a.proxy(this.onDestroy,b.API)),b.API.stopTransition=this.stopTransition;for(var c=0;c<b.startingSlide;c++)b.container.append(b.slides[0])},postInit:function(b){var c,d,e,f,g=b.carouselVertical;b.carouselVisible&&b.carouselVisible>b.slideCount&&(b.carouselVisible=b.slideCount-1);var h=b.carouselVisible||b.slides.length,i={display:g?"block":"inline-block",position:"static"};if(b.container.css({position:"relative",overflow:"hidden"}),b.slides.css(i),b._currSlide=b.currSlide,f=a('<div class="cycle-carousel-wrap"></div>').prependTo(b.container).css({margin:0,padding:0,top:0,left:0,position:"absolute"}).append(b.slides),b._carouselWrap=f,g||f.css("white-space","nowrap"),b.allowWrap!==!1){for(d=0;d<(void 0===b.carouselVisible?2:1);d++){for(c=0;c<b.slideCount;c++)f.append(b.slides[c].cloneNode(!0));for(c=b.slideCount;c--;)f.prepend(b.slides[c].cloneNode(!0))}f.find(".cycle-slide-active").removeClass("cycle-slide-active"),b.slides.eq(b.startingSlide).addClass("cycle-slide-active")}b.pager&&b.allowWrap===!1&&(e=b.slideCount-h,a(b.pager).children().filter(":gt("+e+")").hide()),b._nextBoundry=b.slideCount-b.carouselVisible,this.prepareDimensions(b)},prepareDimensions:function(b){var c,d,e,f,g=b.carouselVertical,h=b.carouselVisible||b.slides.length;if(b.carouselFluid&&b.carouselVisible?b._carouselResizeThrottle||this.fluidSlides(b):b.carouselVisible&&b.carouselSlideDimension?(c=h*b.carouselSlideDimension,b.container[g?"height":"width"](c)):b.carouselVisible&&(c=h*a(b.slides[0])[g?"outerHeight":"outerWidth"](!0),b.container[g?"height":"width"](c)),d=b.carouselOffset||0,b.allowWrap!==!1)if(b.carouselSlideDimension)d-=(b.slideCount+b.currSlide)*b.carouselSlideDimension;else for(e=b._carouselWrap.children(),f=0;f<b.slideCount+b.currSlide;f++)d-=a(e[f])[g?"outerHeight":"outerWidth"](!0);b._carouselWrap.css(g?"top":"left",d)},fluidSlides:function(b){function c(){clearTimeout(e),e=setTimeout(d,20)}function d(){b._carouselWrap.stop(!1,!0);var a=b.container.width()/b.carouselVisible;a=Math.ceil(a-g),b._carouselWrap.children().width(a),b._sentinel&&b._sentinel.width(a),h(b)}var e,f=b.slides.eq(0),g=f.outerWidth()-f.width(),h=this.prepareDimensions;a(window).on("resize",c),b._carouselResizeThrottle=c,d()},transition:function(b,c,d,e,f){var g,h={},i=b.nextSlide-b.currSlide,j=b.carouselVertical,k=b.speed;if(b.allowWrap===!1){e=i>0;var l=b._currSlide,m=b.slideCount-b.carouselVisible;i>0&&b.nextSlide>m&&l==m?i=0:i>0&&b.nextSlide>m?i=b.nextSlide-l-(b.nextSlide-m):0>i&&b.currSlide>m&&b.nextSlide>m?i=0:0>i&&b.currSlide>m?i+=b.currSlide-m:l=b.currSlide,g=this.getScroll(b,j,l,i),b.API.opts()._currSlide=b.nextSlide>m?m:b.nextSlide}else e&&0===b.nextSlide?(g=this.getDim(b,b.currSlide,j),f=this.genCallback(b,e,j,f)):e||b.nextSlide!=b.slideCount-1?g=this.getScroll(b,j,b.currSlide,i):(g=this.getDim(b,b.currSlide,j),f=this.genCallback(b,e,j,f));h[j?"top":"left"]=e?"-="+g:"+="+g,b.throttleSpeed&&(k=g/a(b.slides[0])[j?"height":"width"]()*b.speed),b._carouselWrap.animate(h,k,b.easing,f)},getDim:function(b,c,d){var e=a(b.slides[c]);return e[d?"outerHeight":"outerWidth"](!0)},getScroll:function(a,b,c,d){var e,f=0;if(d>0)for(e=c;c+d>e;e++)f+=this.getDim(a,e,b);else for(e=c;e>c+d;e--)f+=this.getDim(a,e,b);return f},genCallback:function(b,c,d,e){return function(){var c=a(b.slides[b.nextSlide]).position(),f=0-c[d?"top":"left"]+(b.carouselOffset||0);b._carouselWrap.css(b.carouselVertical?"top":"left",f),e()}},stopTransition:function(){var a=this.opts();a.slides.stop(!1,!0),a._carouselWrap.stop(!1,!0)},onDestroy:function(){var b=this.opts();b._carouselResizeThrottle&&a(window).off("resize",b._carouselResizeThrottle),b.slides.prependTo(b.container),b._carouselWrap.remove()}}}(jQuery);;
/* AUTOGENERATED: script.js */
/* vim: set ts=2 sw=2 sts=2 et: */

/**
 * Product attributes functions
 *
 * Copyright (c) 2011-present Qualiteam software Ltd. All rights reserved.
 * See https://www.x-cart.com/license-agreement.html for license details.
 */

// Get product attribute element by name
function product_attribute(name_of_attribute)
{
  var e = jQuery('form[name="add_to_cart"] :input').filter(
    function() {
      return this.name && this.name.search(name_of_attribute) != -1;
    }
  );

  return e.get(0);
}

var textAttrCache = [];

function getAttributeValuesParams(product)
{
  var activeAttributeValues = '';
  var base = '.product-info-' + product.product_id;

  jQuery("ul.attribute-values input[type=checkbox]", jQuery(base).last()).each(function(index, elem) {
    activeAttributeValues += jQuery(elem).data('attribute-id') + '_';
    activeAttributeValues += jQuery(elem).is(":checked") ?  jQuery(elem).val() : jQuery(elem).data('unchecked');
    activeAttributeValues += ',';
  });

  jQuery("ul.attribute-values select", jQuery(base).last()).each(function(index, elem) {
    activeAttributeValues += jQuery(elem).data('attribute-id') + '_' + jQuery(elem).val() + ',';
  });

  jQuery("ul.attribute-values textarea", jQuery(base).last()).each(function(index, elem) {
    textAttrCache[jQuery(elem).data('attribute-id')] = jQuery(elem).val();
  });

  jQuery("ul.attribute-values input.blocks-input", jQuery(base).last()).each(function(index, elem) {
    activeAttributeValues += jQuery(elem).data('attribute-id') + '_' + jQuery(elem).val() + ',';
  });

  return {
    attribute_values: activeAttributeValues
  };
}

/**
 * Product attributes triggers are inputs and selectors
 * of the attribute-values block
 *
 * @returns {String}
 */
function getAttributeValuesTriggers()
{
  return 'ul.attribute-values input, ul.attribute-values select';
}

function getAttributeValuesShadowWidgets()
{
  return '.widget-fingerprint-product-price';
}

function bindAttributeValuesTriggers()
{
  var handler = function (productId) {
    core.trigger('update-product-page', productId);
  };

  var obj = jQuery("ul.attribute-values").closest('.product-details-info').find('form.product-details');
  if (obj.length > 0) {
    var productId = jQuery('input[name="product_id"]', obj).val();

    jQuery("ul.attribute-values input[type='checkbox']").unbind('change').bind('change', function (e) {handler(productId)});
    jQuery("ul.attribute-values input.blocks-input").unbind('change').bind('change', function (e) {handler(productId)});
    jQuery("ul.attribute-values select").unbind('change').bind('change', function (e) {handler(productId)});

    jQuery("ul.attribute-values textarea").each(function(index, elem) {
      if (textAttrCache[jQuery(elem).data('attribute-id')]) {
        jQuery(elem).val(textAttrCache[jQuery(elem).data('attribute-id')]);
      };
    });
  }
}

function BlocksSelector()
{
  jQuery('.product-details-info').on(
    'click',
    '.block-value:not(.selected)',
    function () {
      var $blockValue = jQuery(this);
      var blockValueId = $blockValue.data('value');
      var blockValueName = $blockValue.find('.block-value-name').html();
      var blockValueModifiers = $blockValue.data('modifiers');
      var blocksName = $blockValue.data('name');

      var $blocksSelector = $blockValue.closest('.blocks-selector');
      var $blocksTitle = $blocksSelector.find('.blocks-title');
      var $blocksInput = $blocksSelector.find('.blocks-input');

      $blocksTitle.removeClass('not-selected');
      $blocksInput.val(blockValueId).change();
      $blocksTitle.find('.attr-value-name').html(blockValueName);
      $blocksTitle.find('.attr-value-modifiers').html(blockValueModifiers);

      unselectAllBlocks(blocksName);
      $blockValue.addClass('selected');
    }
  );

  var timeout;
  var $tooltip;

  jQuery('.product-details-info').on({
    mouseenter: function () {
      $tooltip = jQuery(this).find('.unavailable-tooltip');
      timeout = setTimeout(function () {
        $tooltip.show(100);
      }, 250);
    },
    mouseleave: function () {
      clearTimeout(timeout);
      if ($tooltip !== undefined) {
        $tooltip.hide(100);
      }
    }
  }, '.block-value.unavailable');
}

function unselectAllBlocks(blocksName) {
  jQuery(`.block-value[data-name="${blocksName}"]`).removeClass('selected');
}

core.autoload(BlocksSelector);
core.bind('block.product.details.postprocess', BlocksSelector);
core.registerWidgetsParamsGetter('update-product-page', getAttributeValuesParams);
core.registerWidgetsTriggers('update-product-page', getAttributeValuesTriggers);
core.registerTriggersBind('update-product-page', bindAttributeValuesTriggers);
core.registerShadowWidgets('update-product-page', getAttributeValuesShadowWidgets);
core.registerShadowWidgets('update-product-page', function() {
  return '.widget-fingerprint-common-attributes';
});;
/* AUTOGENERATED: products_list.js */
decorate('ProductsListView','postprocess',function(isSuccess,initial){arguments.callee.previousMethod.apply(this,arguments);if(isSuccess){jQuery('.quicklook button.quicklook-link',this.base).click(function(){popup.openAsWait();return!popup.load(URLHandler.buildURL({target:'quick_look',action:'',product_id:core.getValueFromClass(this,'quicklook-link'),only_center:1}),function(){jQuery('.formError').hide()},5e4)});core.bind('block.product.details.postprocess',function(){core.trigger('init-cycle-gallery')})}});;
/* AUTOGENERATED: subscribe.js */
function SubscribeBlockView(base){var args=Array.prototype.slice.call(arguments,0);this.callSupermethod('constructor',args);var form=this.base?this.base.find('.subscription-form-block form').get(0):null;if(form)form.commonController.enableBackgroundSubmit(undefined,_.bind(function(event,result){if(result.isValid&&result.textStatus==='success'){this.processSuccess()}else this.processError()},this))};extend(SubscribeBlockView,ALoadable);SubscribeBlockView.autoload=function(){jQuery('.subscription-block').each(function(){new SubscribeBlockView(this)})};SubscribeBlockView.prototype.widgetTarget='newsletter_subscriptions';SubscribeBlockView.prototype.widgetClass='\\XLite\\Module\\XC\\NewsletterSubscriptions\\View\\SubscribeBlock';SubscribeBlockView.prototype.processSuccess=function(){this.base.find('.subscription-form-block').hide();this.base.find('.subscription-error-block').hide();this.base.find('.subscription-success-block').removeClass('hidden');this.base.find('.subscription-success-block').show()};SubscribeBlockView.prototype.processError=function(){this.base.find('.subscription-error-block').removeClass('hidden');this.base.find('.subscription-error-block').show()};SubscribeBlockView.prototype.getEventNamespace=function(){return'NewsletterSubscriptions'};core.autoload(SubscribeBlockView);;
/* AUTOGENERATED: jquery_footer.js */
function mobileDropdown(){if(jQuery('#top-menu.dropdown-menu').hasClass('scrollable')==true)jQuery('#top-menu.dropdown-menu').removeClass('scrollable').removeAttr('style');var h1=jQuery(window).height(),h2=jQuery('#top-menu.dropdown-menu').height(),h3=jQuery('.mobile_header ul.nav-pills').height();if(h1<h2+h3)jQuery('#top-menu.dropdown-menu').addClass('scrollable').height(h1-h3)};jQuery(function(){mobileDropdown();jQuery(window).resize(mobileDropdown);jQuery(function(){jQuery('.top-main-menu a, .top-main-menu .primary-title').on('touchstart',function(e){if(jQuery(this).hasClass('tap')!==true&&jQuery(this).parent().parent().hasClass('tap')!==true)jQuery('ul.tap, a.tap, .primary-title.tap').removeClass('tap');if(jQuery(this).next('ul').length!==0){jQuery(this).toggleClass('tap');if(jQuery(this).hasClass('tap')==true)e.preventDefault();jQuery(this).next('ul').toggleClass('tap')};jQuery(document).on('touchstart',function(e){if(jQuery(e.target).closest('.tap').length==0)jQuery('ul.tap, a.tap, .primary-title.tap').removeClass('tap')})})})});;
/* AUTOGENERATED: flyout-menu.js */
jQuery(document).ready(function(){jQuery('ul.flyout-menu > li:not(.leaf) > a').on("touchstart",function(e){jQuery('ul.flyout-menu').addClass('touch');var link=jQuery(this),li=jQuery(this).parent();if(link.hasClass('hover')){li.addClass('hover');return true}else{link.addClass('hover');jQuery('ul.flyout-menu > li > a').not(this).removeClass('hover');li.closest('ul.flyout-menu').find('li').removeClass('hover');li.addClass('hover');e.preventDefault();return false}})});;